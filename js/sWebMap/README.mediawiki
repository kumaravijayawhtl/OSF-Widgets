== Prelude ==

Read the entire documentation of the sWebMap application directly on the [http://techwiki.openstructs.org/index.php/SWebMap TechWiki sWebMap documentation page]. You will have access to all the code examples, the options you can use when you create a sWebMap and all the usage scenarios.

== Introduction ==

The <code>sWebMap</code> [http://techwiki.openstructs.org/index.php/Category:Semantic_Component semantic component] is an interactive map that works seamlessly with the geo-localized information available on a [http://techwiki.openstructs.org/index.php/Category:Open_Semantic_Framework Open Semantic Framework] instance. If a web developer has access to an OSF instance, she can create her own sWebMap component in a single line of code. The only thing that is needed is to properly configure the options of the component.

The <code>sWebMap</code> marries a [http://techwiki.openstructs.org/index.php/JavaScript_Concept JavaScript] Google map with the underlying structured data in an OSF instance. Any data that has geo-locational data of any type may utilize the <code>sWebMap</code> widget. The <code>sWebMap</code> component lets people search, browse, filter and display all kind of information on a map. The map may display three different kind of things:

# Records that have a single location. They are displayed on the map using a '''marker''' icon
# Records that represent a geographical area. They are displayed on the map using '''polygon''' shapes with different colors
# Records that represent a path. They are displayed on a map using '''polylines''' (lines with one or multiple vertices) with different colors.

The <code>sWebMap</code> has two different major modes:

# A mode that displays a single map, with a result set and multiple filtering criteria
# A mode that displays a main map, with 3 smaller maps that are used as ''focus maps''. These ''focus maps'' are used to highlight specific areas of the main map. This mode also displays all the results and filters for each different ''focus map''

Lastly, there are three main categories of filters that can be used to display the records on the map:

# Dataset filters
# Type filters
# Attribute/value filters.

== OSF ==

The <code>sWebMap</code> control communicates with an OSF (Open Semantic Framework) instance. More specifically, a <code>sWebMap</code> control will send [http://techwiki.openstructs.org/index.php/Search Search] queries to a geo-enabled OSF Search web service endpoint.

Depending on the options you had specified when you created the <code>sWebMap</code> control, each time you move (option), zoom (option) or change the filtering criterias, this will send a query to the Search endpoint. The <code>sWebMap</code> control then requests JSON formatted resultset and display the results to the user.

=== Schemas ===
All of the records that are returned by the Search web service endpoint of a OSF instance are described using different ontologies. These ontologies should be defined in the OSF instance and the [http://techwiki.openstructs.org/index.php/Instance_Record_and_Object_Notation_(irON)_Specification#Structure_Schema_Object_3 irON Schema]; these ontologies may have been [http://techwiki.openstructs.org/index.php/StructOntology:_Overview#Update_Option generated by the structOntology conStruct module]. It is these schema that should be used by the <code>sWebMap</code> control (see the <code>schemas</code> setting). The structOntology module will generate one irON schema per loaded ontology.

What needs to be done is to load all the irON schema that describes the records that are expected to be manipulated in the <code>sWebMap</code> control. If the proper schema are not loaded, the tool will continue to work properly, but it may have to fallback on default behaviors.

== Modes ==

There are two major modes to the <code>sWebMap</code> component:

# Normal Mode
# Focus Windows Mode

Let's take a look at each of these modes.

=== Normal Mode ===

The normal mode is the default, basic mapping mode. In this mode, users are able to search and browse records in a single map. Results are displayed in a results section, and filters are available to facet the information displayed to the user. Map sessions can be saved, loaded, deleted and shared.

=== Focus Windows Mode ===

The focus window mode is a special mode where 3 focus maps have been added to the user interface. The big map shows the area covered by each of the focus map, in different colors. What the user does is to move the focus windows around. Each of the focus windows is related to a particular region of the bigger map. Each time the user clicks on a different focus map, a different set of records is displayed within the selected focus window.

This mode is used to compare different regions on a map. The filters are applied to each focus window. Different records can be selected within each focus window. Maps in focus window mode can be saved, loaded, shared and deleted.

== Templating ==

The <code>sWebMap</code> control uses templates to display two kind of information to the user:

# All the records from a resultset
# The complete description of an individual record

Two different templating technologies are used. The templating technology used to display the results within a resultset is native to the <code>sWebMap</code> control. The templating technology used to display the complete description of an individual record is the same as used by conStruct to display records' individual page using the structView Drupal module. This other method is discussed at length in the [http://techwiki.openstructs.org/index.php/ Building conStruct Templates] tutorial. The templates that have been created that way will simply be re-used by the <code>sWebMap</code> control. No work needs to be duplicated.

Note that this second templating mechanism is only used by the <code>sWebMap</code> control if the <code>enableRecordDisplayOverlay</code> is enabled.